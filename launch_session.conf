# Kitty Session Configuration for PX4 Simulation
# Usage: kitty --session launch_session.conf

# ==============================================================================
# [IMPORTANT] USER CONFIGURATION REQUIRED
# ==============================================================================
# This file contains HARDCODED PATHS that must match your system.
# Please review the 'cd' commands below and update them if your workspace
# or PX4-Autopilot location is different.
#
# Default Assumptions:
# - Workspace: /home/kxd/ws/px4sim_ws
# - PX4 Source: /home/kxd/ws/px4sim_ws/PX4-Autopilot (or similar struct)
# ==============================================================================

# Set layout to tall (left-right split for two windows)
layout tall

# --- GLOBAL WORKSPACE PATH ---
# TODO: Change this line to your ROS 2 workspace root
cd /home/kxd/ws/px4sim_ws

# Window 1: PX4 Simulation (Gazebo)
# Running 'make' directly to allow interactive 'pxh>' shell
# TODO: Check if 'PX4-Autopilot' is inside the folder you cd'd to above.
# If your PX4-Autopilot is in ~, change to: cd ~/PX4-Autopilot
launch --title "PX4 SITL" bash -c "export PX4_GZ_WORLD=baylands && cd PX4-Autopilot && make px4_sitl gz_x500_depth; exec bash"

# Window 2: Networking (MicroXRCEAgent + Bridge)
# This launches the ROS 2 side.
launch --title "Agent & Bridge" bash -c "source install/setup.bash && ros2 launch px4_bringup sitl.launch.py enable_px4:=False; exec bash"

# Focus on the simulation window initially
focus_matching_window title:"PX4 SITL"
